--source include/not_embedded.inc
# Save the initial number of concurrent sessions
--source include/count_sessions.inc
--source include/primary-replica.inc
--connection primary

SHOW GLOBAL VARIABLES LIKE 'log_backward_compatible_user_definitions';

--echo #
--echo # WL#8540: Support IF [NOT] EXISTS clause in CREATE/DROP USER
--echo #

CREATE USER u1@localhost;
CREATE USER IF NOT EXISTS u1@localhost, u2@localhost;
ALTER USER IF EXISTS u1@localhost ACCOUNT LOCK;
DROP USER u1@localhost;
DROP USER IF EXISTS u2@localhost;

--source include/sync_replica_sql_with_primary.inc
--echo [On Replica]
--source include/show_binlog_events.inc
--source include/rpl_end.inc

--echo
--echo End of 5.7 tests!
--echo
