include/primary-replica.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the primary info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
[connection primary]
CREATE TABLE t1(n INT NOT NULL AUTO_INCREMENT PRIMARY KEY);
INSERT INTO t1 VALUES (1),(2),(3),(4);
DROP TABLE t1;
CREATE TABLE t2(n INT NOT NULL AUTO_INCREMENT PRIMARY KEY);
INSERT INTO t2 VALUES (1),(2);
INSERT INTO t2 VALUES (3),(4);
DROP TABLE t2;
include/stop_replica.inc
RESET REPLICA;
Warnings:
Note	1759	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	1760	Storing MySQL user name or password information in the primary info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
START REPLICA UNTIL PRIMARY_LOG_FILE='primary-bin.000001', PRIMARY_LOG_POS=primary_pos_drop_t1
include/wait_for_replica_sql_to_stop.inc
SELECT * FROM t1;
n
1
2
3
4
include/check_replica_param.inc [Exec_Primary_Log_Pos]
START REPLICA UNTIL PRIMARY_LOG_FILE='primary-no-such-bin.000001', PRIMARY_LOG_POS=PRIMARY_LOG_POS;
include/wait_for_replica_sql_to_stop.inc
SELECT * FROM t1;
n
1
2
3
4
include/check_replica_param.inc [Exec_Primary_Log_Pos]
START REPLICA UNTIL RELAY_LOG_FILE='replica-relay-bin.000002', RELAY_LOG_POS=relay_pos_insert1_t2
include/wait_for_replica_sql_to_stop.inc
SELECT * FROM t2;
n
1
2
include/check_replica_param.inc [Exec_Primary_Log_Pos]
START REPLICA;
include/wait_for_replica_to_start.inc
include/stop_replica.inc
START REPLICA SQL_THREAD UNTIL PRIMARY_LOG_FILE='primary-bin.000001', PRIMARY_LOG_POS=primary_pos_create_t2
include/wait_for_replica_param.inc [Until_Log_Pos]
include/wait_for_replica_sql_to_stop.inc
include/check_replica_param.inc [Exec_Primary_Log_Pos]
START REPLICA UNTIL PRIMARY_LOG_FILE='primary-bin', PRIMARY_LOG_POS=PRIMARY_LOG_POS;
ERROR HY000: Incorrect parameter or combination of parameters for START REPLICA UNTIL
START REPLICA UNTIL PRIMARY_LOG_FILE='primary-bin.000001', PRIMARY_LOG_POS=PRIMARY_LOG_POS, RELAY_LOG_POS=RELAY_LOG_POS;
ERROR HY000: Incorrect parameter or combination of parameters for START REPLICA UNTIL
START REPLICA UNTIL PRIMARY_LOG_FILE='primary-bin.000001';
ERROR HY000: Incorrect parameter or combination of parameters for START REPLICA UNTIL
START REPLICA UNTIL RELAY_LOG_FILE='replica-relay-bin.000009';
ERROR HY000: Incorrect parameter or combination of parameters for START REPLICA UNTIL
START REPLICA UNTIL RELAY_LOG_FILE='replica-relay-bin.000002', PRIMARY_LOG_POS=PRIMARY_LOG_POS;
ERROR HY000: Incorrect parameter or combination of parameters for START REPLICA UNTIL
START REPLICA;
START REPLICA UNTIL PRIMARY_LOG_FILE='primary-bin.000001', PRIMARY_LOG_POS=PRIMARY_LOG_POS;
Warnings:
Note	3083	Replication thread(s) for channel '' are already runnning.
include/stop_replica.inc
RESET REPLICA;
include/rpl_end.inc
