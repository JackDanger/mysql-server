include/primary-replica.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the primary info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
[connection primary]
CREATE TABLE t1 (a INT);
FLUSH BINARY LOGS;
INSERT INTO t1 VALUES (1);
include/stop_replica.inc
# Shutdown primary
include/rpl_stop_server.inc [server_number=1]
# Move the primary binlog files and the index file to a new place
# Restart primary with log-bin option set to the new path
# Primary has restarted successfully
include/start_replica.inc
# Create the primary-bin.index file with the old format
include/stop_replica.inc
# Shutdown primary
include/rpl_stop_server.inc [server_number=1]
# Move back the primary binlog files
# Remove the unneeded primary-bin.index file
# Restart primary with log-bin option set to default
# Primary has restarted successfully
include/start_replica.inc
include/rpl_stop_server.inc [server_number=2]
# relocate  binlogs
# relocate  relay logs
# Restart replica with options log-bin, relay-log set to the new paths
# Replica server has restarted successfully
include/start_replica.inc
include/stop_replica.inc
FLUSH LOGS;
INSERT INTO t1 VALUES (2);
INSERT INTO t1 VALUES (2);
INSERT INTO t1 VALUES (2);
INSERT INTO t1 VALUES (2);
FLUSH LOGS;
FLUSH LOGS;
include/start_replica.inc
include/diff_tables.inc [primary:t1,replica:t1]
DROP TABLE t1;
include/stop_replica.inc
include/rpl_stop_server.inc [server_number=2]
# remove tmpdir
# restarted with previous replica settings
include/start_replica.inc
include/rpl_end.inc
