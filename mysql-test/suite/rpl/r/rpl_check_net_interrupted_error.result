include/primary-replica.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the primary info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
[connection primary]
[connection replica]
call mtr.add_suppression("Replica I/O .*: Primary command COM_REGISTER_REPLICA failed: .*");
SET @debug_saved=@@global.debug;
include/stop_replica.inc
[connection primary]
CREATE TABLE t1 (c1 INT);
DROP TABLE t1;
[connection replica]
#
# Active injected error during getting server id from primary
#
SET GLOBAL DEBUG='d,get_primary_server_id.ER_NET_READ_INTERRUPTED';
START REPLICA;
include/wait_for_replica_io_to_start.inc
[connection primary]
include/sync_replica_io_with_primary.inc
include/assert_grep.inc [Make sure there is not the error "fatal error is encountered when it try to get the value of SERVER_ID variable from primary" in replica's error log.]
include/assert_grep.inc [Make sure there is the warning "Get primary SERVER_ID failed with error" in replica's error log.]
include/stop_replica.inc
SET GLOBAL DEBUG= @save_debug;
include/start_replica.inc
include/rpl_end.inc
