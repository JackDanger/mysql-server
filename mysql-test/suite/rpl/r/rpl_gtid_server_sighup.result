include/primary-replica.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the primary info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
[connection primary]
CREATE TABLE pid_table(pid_no INT);
[connection server_1]
LOAD DATA LOCAL INFILE 'pid_file' INTO TABLE pid_table;
DELETE FROM pid_table;
include/sync_replica_sql_with_primary.inc
[connection server_1]
include/show_binlog_events.inc
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
primary-bin.000002	#	Previous_gtids	#	#	Gtid_set
primary-bin.000002	#	Gtid	#	#	SET @@SESSION.GTID_NEXT= 'Gtid_set'
primary-bin.000002	#	Query	#	#	BEGIN
primary-bin.000002	#	Query	#	#	use `test`; DELETE FROM pid_table
primary-bin.000002	#	Xid	#	#	COMMIT /* XID */
include/rpl_stop_server.inc [server_number=1]
include/rpl_start_server.inc [server_number=1 gtids=on]
include/sync_replica_sql_with_primary.inc
[connection server_2]
LOAD DATA LOCAL INFILE 'pid_file' INTO TABLE pid_table;
[connection server_1]
DELETE FROM pid_table;
include/sync_replica_sql_with_primary.inc
include/show_relaylog_events.inc
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
replica-relay-bin.000006	#	Previous_gtids	#	#	Gtid_set
replica-relay-bin.000006	#	Format_desc	#	#	SERVER_VERSION, BINLOG_VERSION
replica-relay-bin.000006	#	Gtid	#	#	SET @@SESSION.GTID_NEXT= 'Gtid_set'
replica-relay-bin.000006	#	Query	#	#	BEGIN
replica-relay-bin.000006	#	Query	#	#	use `test`; DELETE FROM pid_table
replica-relay-bin.000006	#	Xid	#	#	COMMIT /* XID */
include/rpl_stop_server.inc [server_number=2]
include/rpl_start_server.inc [server_number=2 gtids=on]
include/rpl_start_replicas.inc
[connection server_1]
DROP TABLE pid_table;
include/sync_replica_sql_with_primary.inc
include/rpl_end.inc
