include/primary-replica.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the primary info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
[connection primary]
SET GLOBAL GTID_PURGED= "primary_uuid:1-2";
CREATE TABLE t1(i INT);
DROP TABLE t1;
START REPLICA IO_THREAD;
include/wait_for_replica_io_error.inc [errno=1236]
Warnings:
Warning	3090	Changing sql mode 'NO_AUTO_CREATE_USER' is deprecated. It will be removed in a future release.
Last_IO_Error = 'Got fatal error 1236 from primary when reading data from binary log: 'The replica is connecting using CHANGE PRIMARY TO PRIMARY_AUTO_POSITION = 1, but the primary has purged binary logs containing GTIDs that the replica requires.''
Warnings:
Warning	3090	Changing sql mode 'NO_AUTO_CREATE_USER' is deprecated. It will be removed in a future release.
SET GLOBAL GTID_PURGED= "primary_uuid:1-2";
include/start_replica.inc
include/sync_replica_sql_with_primary.inc
include/assert.inc [Replica should be able to get GTID-3 and 4 now.]
call mtr.add_suppression(".*Primary has purged binary logs containing GTIDs that the replica requires.*");
include/rpl_reset.inc
CREATE TABLE t1(i INT);
DROP TABLE t1;
include/stop_replica.inc
FLUSH LOGS;
DELETE FROM mysql.gtid_executed;
Warnings:
Warning	3129	Please do not modify the gtid_executed table. This is a mysql internal system table to store GTIDs for committed transactions. Modifying it can lead to an inconsistent GTID state.
include/rpl_restart_server.inc [server_number=1]
START REPLICA IO_THREAD;
include/wait_for_replica_io_error.inc [errno=1236]
Warnings:
Warning	3090	Changing sql mode 'NO_AUTO_CREATE_USER' is deprecated. It will be removed in a future release.
Last_IO_Error = 'Got fatal error 1236 from primary when reading data from binary log: 'Replica has more GTIDs than the primary has, using the primary's SERVER_UUID. This may indicate that the end of the binary log was truncated or that the last binary log file was lost, e.g., after a power or disk failure when sync_binlog != 1. The primary may or may not have rolled back transactions that were already replica''
Warnings:
Warning	3090	Changing sql mode 'NO_AUTO_CREATE_USER' is deprecated. It will be removed in a future release.
call mtr.add_suppression(".*Replica has more GTIDs than the primary has.*");
SET GLOBAL GTID_PURGED= "primary_uuid:1-2";
include/start_replica.inc
include/rpl_end.inc
