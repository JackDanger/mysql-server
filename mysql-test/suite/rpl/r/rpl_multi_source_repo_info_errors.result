include/primary-replica.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the primary info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
[connection primary]
[connection replica]
call mtr.add_suppression("Replica failed to initialize relay log info structure from the repository");
call mtr.add_suppression("Replica: Could not start replica for channel");
call mtr.add_suppression("Error during --relay-log-recovery: Could not locate rotate event from the primary");
call mtr.add_suppression("replica with the same server_uuid as this replica has connected to the primary");
call mtr.add_suppression("Failed to create or recover replication info repositories");
include/stop_replica.inc
RESET REPLICA ALL;
SET GLOBAL primary_info_repository='TABLE';
SET GLOBAL relay_log_info_repository='TABLE';
CHANGE PRIMARY TO PRIMARY_HOST='localhost', PRIMARY_USER='root', PRIMARY_PORT=PRIMARY_MYPORT FOR CHANNEL 'ch1';
#
# RESTART REPLICA SERVER
#
include/rpl_restart_server.inc [server_number=2 parameters: --relay-log-recovery --skip-replica-start --primary-info-repository=TABLE --relay-log-info-repository=TABLE --replica-parallel-workers=4 --relay-log-purge=0]
START REPLICA;
ERROR HY000: Replica failed to initialize relay log info structure from the repository
CHANGE PRIMARY TO PRIMARY_HOST='localhost', PRIMARY_USER='root', PRIMARY_PORT=PRIMARY_MYPORT FOR CHANNEL 'ch1';
START REPLICA;
ERROR HY000: Replica failed to initialize relay log info structure from the repository
RESET REPLICA ALL FOR CHANNEL 'ch1';
CHANGE PRIMARY TO PRIMARY_HOST='localhost', PRIMARY_USER='root', PRIMARY_PORT=PRIMARY_MYPORT FOR CHANNEL 'ch1';
CHANGE PRIMARY TO PRIMARY_HOST='localhost', PRIMARY_USER='root', PRIMARY_PORT=PRIMARY_MYPORT FOR CHANNEL '';
START REPLICA;
include/stop_replica.inc
RESET REPLICA ALL;
SET @@global.primary_info_repository='SAVE_MI_REPO_TYPE';
SET @@global.relay_log_info_repository='SAVE_RLI_REPO_TYPE';
SET @@global.replica_parallel_workers=SAVE_PARALLEL_WORKERS;
CHANGE PRIMARY TO PRIMARY_HOST='127.0.0.1', PRIMARY_USER='root', PRIMARY_PORT=PRIMARY_MYPORT;
include/start_replica.inc
include/rpl_restart_server.inc [server_number=2]
[connection primary]
[connection replica]
call mtr.add_suppression("Replica: Failed to initialize the primary info structure for channel");
call mtr.add_suppression("The replica coordinator and worker threads are stopped");
call mtr.add_suppression("Recovery from primary pos");
call mtr.add_suppression("It is not possible to change the type of the relay log repository because there are workers repositories with possible");
include/stop_replica.inc
Warnings:
Note	3084	Replication thread(s) for channel '' are already stopped.
RESET REPLICA ALL;
SET @@global.primary_info_repository="TABLE";
SET @@global.relay_log_info_repository="TABLE";
SET @@global.replica_parallel_workers=5;
CHANGE PRIMARY TO PRIMARY_HOST='localhost', PRIMARY_USER='root', PRIMARY_PORT=PRIMARY_MYPORT FOR CHANNEL 'ch_trunk';
include/start_replica.inc
=== RESTART REPLICA SERVER ===
include/rpl_restart_server.inc [server_number=2 parameters: --relay-log-recovery --skip-replica-start --primary-info-repository=TABLE --relay-log-info-repository=TABLE --replica-parallel-workers=5]
[connection replica]
START REPLICA;
include/stop_replica.inc
RESET REPLICA ALL;
SET @@global.primary_info_repository='SAVE_MI_REPO_TYPE';
SET @@global.relay_log_info_repository='SAVE_RLI_REPO_TYPE';
SET @@global.replica_parallel_workers=SAVE_PARALLEL_WORKERS;
CHANGE PRIMARY TO PRIMARY_HOST='127.0.0.1', PRIMARY_USER='root', PRIMARY_PORT=PRIMARY_MYPORT;
include/start_replica.inc
include/rpl_restart_server.inc [server_number=2]
include/start_replica.inc
[connection primary]
include/rpl_end.inc
