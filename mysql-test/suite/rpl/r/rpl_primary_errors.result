include/primary-replica.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the primary info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
[connection primary]
call mtr.add_suppression(".* You need to use --log-bin to make .* work.");
include/stop_replica.inc
CHANGE PRIMARY TO PRIMARY_AUTO_POSITION= 0;
include/start_replica.inc
[connection primary]
#
# Error: binlog file doesn't exist
#
#
# Error: primary doesn't set server_id
#
SET GLOBAL debug= 'd,simulate_no_server_id';
#
# Error: Error while sending faked rotate event
#
SET GLOBAL debug= 'd,simulate_send_error';
SET GLOBAL debug= '';
#
# Error: Fail to open binlog file
#
FLUSH BINARY LOGS;
#
# Error: Could not find Format_Description_Event
#
#
# Error: Fail on reading Previous_gtid_log_event
#
#
# Error: Fail on reading event
#
#
# Error: Client requests from a position less than 4
#
[connection replica]
include/stop_replica.inc
SET GLOBAL debug= 'd,request_primary_log_pos_3';
START REPLICA IO_THREAD;
include/wait_for_replica_io_error.inc [errno=1236]
SET GLOBAL debug= '$replica_debug';
#
# Error: Binary log is not open on primary
#
include/rpl_restart_server.inc [server_number=1 parameters: --disable-log-bin --gtid-mode=off]
#
# Error: primary's gtid_mode is not on
#
include/rpl_restart_server.inc [server_number=1 parameters: --gtid-mode=off]
include/rpl_restart_server.inc [server_number=1]
#
# Error: Dump thread is killed
#
[connection primary]
RESET PRIMARY;
CREATE TABLE t1(c1 INT);
SET GLOBAL debug= 'd,simulate_kill_dump';
#
# Error: Fail to send heartbeat with an net error
#
INSERT INTO t1 VALUES(1);
SET GLOBAL debug= 'd,simulate_flush_error';
SET GLOBAL debug= '';
DROP TABLE t1;
[connection replica]
RESET PRIMARY;
RESET REPLICA;
include/start_replica.inc
include/rpl_end.inc
