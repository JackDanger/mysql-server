include/primary-replica.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the primary info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
[connection primary]
[connection replica]
CALL mtr.add_suppression('Server id not set, will not start replica');
CALL mtr.add_suppression('Replica is not configured or failed to initialize properly');
include/assert.inc [replica's server_id was greater than 0 at startup]
[connection primary]
CREATE TABLE t1 (c1 INT) ENGINE=InnoDB;
include/sync_replica_sql_with_primary.inc
include/stop_replica.inc
SET @@GLOBAL.server_id= 0;
START REPLICA;
ERROR HY000: The server is not configured as replica; fix in config file or with CHANGE PRIMARY TO
include/assert_grep.inc [Replica didn't started because of server_id=0]
CHANGE PRIMARY TO PRIMARY_LOG_POS=4;
START REPLICA FOR CHANNEL 'any_channel';
ERROR HY000: Replica channel 'any_channel' does not exist.
CHANGE PRIMARY TO PRIMARY_LOG_POS=4, PRIMARY_HOST='127.0.0.1' FOR CHANNEL 'any_channel';
START REPLICA FOR CHANNEL 'any_channel';
ERROR HY000: The server is not configured as replica; fix in config file or with CHANGE PRIMARY TO
include/assert_grep.inc [Replica for channel didn't started because of server_id=0]
RESET REPLICA ALL FOR CHANNEL 'any_channel';
DROP TABLE t1;
SET @@GLOBAL.server_id= 2;
include/start_replica.inc
[connection primary]
include/sync_replica_sql_with_primary.inc
include/rpl_restart_server.inc [server_number=2 parameters: --server-id=0]
[connection replica]
include/assert.inc [replica's server_id was 0 at startup]
START REPLICA;
ERROR HY000: Replica is not configured or failed to initialize properly. You must at least set --server-id to enable either a primary or a replica. Additional error messages can be found in the MySQL error log.
CHANGE PRIMARY TO PRIMARY_LOG_POS=4;
ERROR HY000: Replica is not configured or failed to initialize properly. You must at least set --server-id to enable either a primary or a replica. Additional error messages can be found in the MySQL error log.
START REPLICA FOR CHANNEL 'any_channel';
ERROR HY000: Replica is not configured or failed to initialize properly. You must at least set --server-id to enable either a primary or a replica. Additional error messages can be found in the MySQL error log.
CHANGE PRIMARY TO PRIMARY_LOG_POS=4 FOR CHANNEL 'any_channel';
ERROR HY000: Replica is not configured or failed to initialize properly. You must at least set --server-id to enable either a primary or a replica. Additional error messages can be found in the MySQL error log.
SET @@GLOBAL.server_id= 2;
START REPLICA;
ERROR HY000: Replica is not configured or failed to initialize properly. You must at least set --server-id to enable either a primary or a replica. Additional error messages can be found in the MySQL error log.
CHANGE PRIMARY TO PRIMARY_LOG_POS=4;
ERROR HY000: Replica is not configured or failed to initialize properly. You must at least set --server-id to enable either a primary or a replica. Additional error messages can be found in the MySQL error log.
START REPLICA FOR CHANNEL 'any_channel';
ERROR HY000: Replica is not configured or failed to initialize properly. You must at least set --server-id to enable either a primary or a replica. Additional error messages can be found in the MySQL error log.
CHANGE PRIMARY TO PRIMARY_LOG_POS=4 FOR CHANNEL 'any_channel';
ERROR HY000: Replica is not configured or failed to initialize properly. You must at least set --server-id to enable either a primary or a replica. Additional error messages can be found in the MySQL error log.
include/rpl_restart_server.inc [server_number=2 parameters: --server-id=2]
[connection replica]
include/start_replica.inc
[connection primary]
DROP TABLE t1;
include/rpl_end.inc
