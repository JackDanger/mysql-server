CALL mtr.add_suppression("Unsafe statement written to the binary log using statement format since BINLOG_FORMAT = STATEMENT.");
CALL mtr.add_suppression("Failed to open the existing info file");
CALL mtr.add_suppression("Error while reading from primary info file");
CALL mtr.add_suppression("Failed to create a new info file");
CALL mtr.add_suppression("The replica coordinator and worker threads are stopped, possibly leaving data in inconsistent state");
start replica;
Got one of the listed errors
start replica;
ERROR HY000: Could not initialize primary info structure; more error messages can be found in the MySQL error log
change primary to primary_host='127.0.0.1',primary_port=PRIMARY_PORT, primary_user='root';
ERROR HY000: Could not initialize primary info structure; more error messages can be found in the MySQL error log
reset replica;
change primary to primary_host='127.0.0.1',primary_port=PRIMARY_PORT, primary_user='root';
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the primary info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
reset primary;
start replica;
include/wait_for_replica_to_start.inc
create temporary table temp_table (a char(80) not null);
insert into temp_table values ("testing temporary tables");
create table t1 (s text);
insert into t1 values('Could not break replica'),('Tried hard');
include/sync_replica_sql_with_primary.inc
Warnings:
Warning	3090	Changing sql mode 'NO_AUTO_CREATE_USER' is deprecated. It will be removed in a future release.
Primary_Log_File = 'primary-bin.000001'
Relay_Primary_Log_File = 'primary-bin.000001'
Warnings:
Warning	3090	Changing sql mode 'NO_AUTO_CREATE_USER' is deprecated. It will be removed in a future release.
include/check_replica_is_running.inc
include/assert.inc [Table t1 should contain the first inserted line]
include/assert.inc [Table t1 should contain the second inserted line]
flush logs;
create table t2(m int not null auto_increment primary key);
insert into t2 values (34),(67),(123);
flush logs;
show binary logs;
Log_name	File_size
primary-bin.000001	#
primary-bin.000002	#
primary-bin.000003	#
create table t3 select * from temp_table;
include/sync_replica_sql_with_primary.inc
include/assert.inc [Data in t3 should be equal to temp_table]
drop table temp_table, t3;
insert into t2 values(1234);
set insert_id=1234;
insert into t2 values(NULL);
call mtr.add_suppression("Replica SQL.*Error .Duplicate entry .1234. for key .PRIMARY.. on query.* Error_code: 1062");
include/wait_for_replica_sql_error_and_skip.inc [errno=1062]
include/sync_replica_sql_with_primary.inc
purge primary logs to 'primary-bin.000002';
show primary logs;
Log_name	primary-bin.000002
File_size	#
Log_name	primary-bin.000003
File_size	#
purge binary logs to 'primary-bin.000002';
show binary logs;
Log_name	File_size
primary-bin.000002	#
primary-bin.000003	#
SELECT @time_for_purge:=DATE_ADD('tmpval', INTERVAL 1 SECOND);
purge primary logs before (@time_for_purge);
Warnings:
Warning	1868	file primary-bin.000003 was not purged because it is the active log file.
show binary logs;
Log_name	File_size
primary-bin.000003	#
insert into t2 values (65);
include/sync_replica_sql_with_primary.inc
Warnings:
Warning	3090	Changing sql mode 'NO_AUTO_CREATE_USER' is deprecated. It will be removed in a future release.
Primary_Log_File = 'primary-bin.000003'
Relay_Primary_Log_File = 'primary-bin.000003'
Warnings:
Warning	3090	Changing sql mode 'NO_AUTO_CREATE_USER' is deprecated. It will be removed in a future release.
include/check_replica_is_running.inc
include/assert.inc [Table t2 should still contain the first inserted line after creation]
include/assert.inc [Table t2 should contain the line inserted after the purge]
include/assert.inc [Table t2 should still contain the second insert line after creation]
include/assert.inc [Table t2 should still contain the third inserted line after creation]
include/assert.inc [Table t2 should still contain the line from the duplicated key test]
create temporary table temp_table (a char(80) not null);
insert into temp_table values ("testing temporary tables part 2");
create table t3 (n int);
include/assert.inc [Table t3 should contain 90 lines on the primary]
create table t4 select * from temp_table;
include/sync_replica_sql_with_primary.inc
include/assert.inc [Data in t4 should be equal to temp_table]
include/check_replica_is_running.inc
lock tables t3 read;
include/assert.inc [Table t3 should contain 90 lines on the replica]
unlock tables;
drop table if exists t1,t2,t3,t4;
drop temporary table temp_table;
include/sync_replica_sql_with_primary.inc
End of 4.1 tests
show binlog events in 'non existing_binlog_file';
ERROR HY000: Error when executing command SHOW BINLOG EVENTS: Could not find target log
purge primary logs before now();
Warnings:
Warning	1868	file replica-bin.000001 was not purged because it is the active log file.
show binlog events in '';
ERROR HY000: Error when executing command SHOW BINLOG EVENTS: Could not find target log
purge primary logs before now();
Warnings:
Warning	1868	file replica-bin.000001 was not purged because it is the active log file.
End of 5.0 tests
include/stop_replica.inc
