include/primary-replica.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the primary info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
[connection primary]
[connection replica]
#######################################################################
# SHOW REPLICA STATUS NONBLOCKING is not allowed within a function.
CREATE FUNCTION func1(arg TEXT) RETURNS TEXT
BEGIN
SHOW REPLICA STATUS NONBLOCKING;
RETURN arg;
END|
ERROR 0A000: Not allowed to return a result set from a function
#######################################################################
# Testing if a user without REPLICATION CLIENT and SUPER privilege can
# execute SHOW REPLICA STATUS NONBLOCKING.
CREATE USER mysqltest_1@localhost;
SHOW GRANTS FOR mysqltest_1@localhost;
Grants for mysqltest_1@localhost
GRANT USAGE ON *.* TO 'mysqltest_1'@'localhost'
SHOW REPLICA STATUS NONBLOCKING;
ERROR 42000: Access denied; you need (at least one of) the SUPER, REPLICATION CLIENT privilege(s) for this operation
DROP USER 'mysqltest_1'@'localhost';
#######################################################################
# Testing if a user with REPLICATION CLIENT privilege can execute
# SHOW REPLICA STATUS NONBLOCKING.
CREATE USER mysqltest_2@localhost;
GRANT REPLICATION CLIENT ON *.* TO 'mysqltest_2'@'localhost';
SHOW GRANTS FOR mysqltest_2@localhost;
Grants for mysqltest_2@localhost
GRANT REPLICATION CLIENT ON *.* TO 'mysqltest_2'@'localhost'
SHOW REPLICA STATUS NONBLOCKING;
DROP USER 'mysqltest_2'@'localhost';
#######################################################################
# Stress test that executes nearly in parallel SSS NONBLOCKING and STOP
# REPLICA.
include/rpl_end.inc
