include/primary-replica.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the primary info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
[connection primary]
[connection replica]
include/stop_replica_sql.inc
# Saving primary position to use on UNTIL clause of START REPLICA
[connection primary]
CREATE TABLE t1 (a INT) ENGINE=InnoDB;
BEGIN;
INSERT INTO t1 VALUES (1);
COMMIT;
include/sync_replica_io_with_primary.inc
# Start SQL thread until it executed the CREATE TABLE
START REPLICA SQL_THREAD UNTIL PRIMARY_LOG_FILE = "PRIMARY_FILE", PRIMARY_LOG_POS = PRIMARY_POS;
# Wait until SQL thread reaches last primary binlog file
include/wait_for_replica_param.inc [Relay_Primary_Log_File]
# Wait until SQL thread reaches desired primary binlog position
include/wait_for_replica_param.inc [Exec_Primary_Log_Pos]
# If the desired position was reached, SQL thread should stop.
include/wait_for_replica_sql_to_stop.inc
include/assert.inc [t1 should be replicated]
include/start_replica_sql.inc
[connection primary]
DROP TABLE t1;
include/rpl_end.inc
