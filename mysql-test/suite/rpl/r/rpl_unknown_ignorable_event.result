include/primary-replica.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the primary info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
[connection primary]
CREATE TABLE t1 (c1 INT) ENGINE=InnoDB;
include/sync_replica_sql_with_primary.inc
# Set a debug point on replica to simulate unknown ignorable log events.
SET @save_debug=@@global.debug;
SET GLOBAL DEBUG='d,simulate_unknown_ignorable_log_event';
[connection primary]
# Write a previous_gtids log event to binlog
# on primary if gtid mode is on.
FLUSH LOGS;
# Write a write_rows log event to binlog on primary.
INSERT INTO t1 VALUES (1);
# The replica receiver thread simulates an unknown ignorable
# log event by rewriting the write_rows log event and
# previous_gtids log event if gtid mode is on before
# writing it(them) in relay log.
include/sync_replica_sql_with_primary.inc
# Verify that the replica applier thread skips these unknown ignorable
# log event.
include/assert.inc [Table t1 must not contain 1]
SET GLOBAL DEBUG= @save_debug;
[connection primary]
DROP TABLE t1;
include/rpl_end.inc
