# Use default setting for mysqld processes
!include include/default_mysqld.cnf
!include include/default_client.cnf

[mysqld.1]

# Run the primary.sh script before starting this process
#!run-primary-sh

log-bin=                 primary-bin

skip-name-resolve
bind-address=               0.0.0.0


[mysqld.2]
# Run the replica.sh script before starting this process
#!run-replica-sh

# Append <testname>-replica.opt file to the list of argument used when
# starting the mysqld
#!use-replica-opt

log-bin=                    replica-bin
relay-log=                  replica-relay-bin

log-replica-updates
primary-retry-count=         10

# Values reported by replica when it connect to primary
# and shows up in SHOW REPLICA STATUS;
report-host=                localhost
report-port=                @mysqld.2.port
report-user=                root

skip-replica-start
skip-name-resolve
bind-address=               ::

# Directory where replicas find the dumps generated by "load data"
# on the server. The path need to have constant length otherwise
# test results will vary, thus a relative path is used.
replica-load-tmpdir=          ../../tmp

[ENV]
PRIMARY_MYPORT=              @mysqld.1.port
PRIMARY_MYSOCK=              @mysqld.1.socket

REPLICA_MYPORT=               @mysqld.2.port
REPLICA_MYSOCK=               @mysqld.2.socket

