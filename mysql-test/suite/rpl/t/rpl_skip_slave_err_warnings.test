###############################################################################
# Bug:#17581990:REPLICA SQL: COULD NOT EXECUTE QUERY EVENT. DETAILED ERROR: ;,
# ERROR_CODE: 0
#
# Problem:
# ========
# Setting replica-skip-errors=all on the replica will make mysql replica
# error log to grow continuously with the following warnings.
#
# [Warning] Replica SQL: Could not execute Query event.
# Detailed error: ;, Error_code: 0
#
# Test:
# =====
# Set up primary replica replication. Set "replica-skip-errors=all" on the slve.
# Execute simple statments on primary which does not cause any error on replica.
# Check that no warning should be generated on replica.
###############################################################################
--source include/have_binlog_format_statement.inc
# Inorder to grep a specific error pattern in error log a fresh error log
# needs to be generated.
--source include/force_restart.inc
--source include/primary-replica.inc

CREATE TABLE t1 (c1 INT) ENGINE=InnoDB;
INSERT INTO test.t1 VALUES (100);
DROP TABLE t1;
--source include/sync_replica_sql_with_primary.inc

# Script produces different warning when executed along with MTS, hence added
# a generic replace regular expression.
--replace_regex /[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2} [0-9]+/--TIME--/ s/Worker .* end_log_pos [0-9]*; //
--let $grep_file=$MYSQLTEST_VARDIR/tmp/replica.err
--let $grep_pattern=Could not execute Query event.
--source include/grep_pattern.inc
--remove_file $grep_file

--source include/rpl_end.inc
