--source include/not_embedded.inc

set @saved_replica_rows_search_algorithms = @@global.replica_rows_search_algorithms;


SELECT @@global.replica_rows_search_algorithms;

SET GLOBAL REPLICA_ROWS_SEARCH_ALGORITHMS=DEFAULT;
SELECT @@global.replica_rows_search_algorithms;

SET GLOBAL REPLICA_ROWS_SEARCH_ALGORITHMS='TABLE_SCAN';
SELECT @@global.replica_rows_search_algorithms;

SET GLOBAL REPLICA_ROWS_SEARCH_ALGORITHMS='HASH_SCAN';
SELECT @@global.replica_rows_search_algorithms;

SET GLOBAL REPLICA_ROWS_SEARCH_ALGORITHMS='INDEX_SCAN';
SELECT @@global.replica_rows_search_algorithms;

SET GLOBAL REPLICA_ROWS_SEARCH_ALGORITHMS='TABLE_SCAN,HASH_SCAN';
SELECT @@global.replica_rows_search_algorithms;

SET GLOBAL REPLICA_ROWS_SEARCH_ALGORITHMS='TABLE_SCAN,HASH_SCAN,INDEX_SCAN';
SELECT @@global.replica_rows_search_algorithms;

SET GLOBAL REPLICA_ROWS_SEARCH_ALGORITHMS='TABLE_SCAN,INDEX_SCAN';
SELECT @@global.replica_rows_search_algorithms;

SET GLOBAL REPLICA_ROWS_SEARCH_ALGORITHMS='HASH_SCAN,INDEX_SCAN';
SELECT @@global.replica_rows_search_algorithms;


# checking that setting variable to a non existing value raises error
--error ER_WRONG_VALUE_FOR_VAR
SET GLOBAL REPLICA_ROWS_SEARCH_ALGORITHMS='TABLE_5CAN';
SELECT @@global.replica_rows_search_algorithms;

--error ER_WRONG_VALUE_FOR_VAR
SET GLOBAL REPLICA_ROWS_SEARCH_ALGORITHMS='';
SELECT @@global.replica_rows_search_algorithms;

--error ER_WRONG_VALUE_FOR_VAR
SET GLOBAL REPLICA_ROWS_SEARCH_ALGORITHMS='1';
SELECT @@global.replica_rows_search_algorithms;

--error ER_WRONG_VALUE_FOR_VAR
SET GLOBAL REPLICA_ROWS_SEARCH_ALGORITHMS=NULL;
SELECT @@global.replica_rows_search_algorithms;

set global replica_rows_search_algorithms = @saved_replica_rows_search_algorithms;
SELECT @@global.replica_rows_search_algorithms;
